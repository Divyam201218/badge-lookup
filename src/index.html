<!DOCTYPE html>
<html>
<head>
  <title>Badge Lookup</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #f5f7fb;
      --card: #ffffff;
      --text: #111827;
      --muted: #6b7280;
      --border: #e5e7eb;
      --accent: #2563eb;
    }

    body.dark {
      --bg: #0f172a;
      --card: #111827;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --border: #1f2933;
      --accent: #60a5fa;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, Segoe UI, sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      margin: 0;
      /* padding: 30px 16px; */
    }

    .container {
      max-width: 720px;
      margin: auto;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    h2 {
      margin: 0;
      font-size: 1.6rem;
    }

    button {
      cursor: pointer;
      border: none;
      background: var(--accent);
      color: white;
      padding: 10px 14px;
      border-radius: 8px;
      font-weight: 500;
    }

    button.secondary {
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
    }

    .search-box {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    input {
      flex: 1;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
    }

    input:focus {
      outline: none;
      border-color: var(--accent);
    }

    .result {
      margin-top: 20px;
    }

    .email-title {
      font-weight: 600;
      margin-bottom: 10px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 14px 16px;
      margin-bottom: 14px;
    }

    .card h4 {
      margin: 0 0 6px;
      font-size: 1.05rem;
    }

    .meta {
      font-size: 0.9rem;
      color: var(--muted);
      margin: 4px 0;
    }

    .card a {
      display: inline-block;
      margin-top: 8px;
      text-decoration: none;
      color: var(--accent);
      font-weight: 500;
    }

    .loading,
    .empty {
      color: var(--muted);
      margin-top: 16px;
    }
    .top-banner {
  width: 100%;
  overflow: hidden;
  background: var(--card);
  border-bottom: 1px solid var(--border);
  padding: 8px 0;
  margin-bottom: 20px;
      top: 0px;
      left: 0px;
}

.scroll-text {
  white-space: nowrap;
  display: inline-block;
  padding-left: 100%;
  font-size: 0.85rem;
  color: var(--muted);
  animation: scroll-left 18s linear infinite;
}

@keyframes scroll-left {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-100%);
  }
}

  </style>
</head>

<body>
  <div class="top-banner">
  <p class="scroll-text">
    Disclaimer: This website displays only digital badges issued on or after December 2025. Badges issued prior to this date have not been uploaded and are not available on this website.
This website does not store or host badges and serves solely as a centralized access point for badges associated with a specific email address.
All badges link to and are hosted by a third-party provider, Certifier.io.
Name change requests may be submitted for review; however, access may be modified or revoked at any time without prior notice.
  </p>
</div>
  <div class="container">

    <div class="header">
      <h2>üéì Badge Lookup</h2>
      <button class="secondary" onclick="toggleTheme()">üåô</button>
    </div>

    <div class="search-box">
      <input type="email" id="email" placeholder="Enter your email" />
      <button onclick="search()">Search</button>
    </div>

    <div id="result" class="result"></div>
  </div>


<script>
/* ---------- Theme ---------- */
const savedTheme = localStorage.getItem("theme");
if (savedTheme === "dark") document.body.classList.add("dark");

function toggleTheme() {
  document.body.classList.toggle("dark");
  localStorage.setItem(
    "theme",
    document.body.classList.contains("dark") ? "dark" : "light"
  );
}

/* ---------- Search ---------- */
async function search() {
  const email = document.getElementById("email").value.trim();
  const resDiv = document.getElementById("result");

  if (!email) return;

  resDiv.innerHTML = `<div class="loading">Searching badges‚Ä¶</div>`;

  const res = await fetch("/.netlify/functions/fetch", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email })
  });

  if (res.status === 404) {
    resDiv.innerHTML = `<div class="empty">‚ùå No badges found for this email.</div>`;
    return;
  }

  const data = await res.json();
  const badges = data[email];

  let html = `<div class="email-title">${email}</div>`;

  badges.forEach(b => {
    html += `
      <div class="card">
        <h4>${b.series}</h4>
        <div class="meta"><b>Name:</b> ${b.name}</div>
        <div class="meta"><b>Issued:</b> ${b.issued}</div>
        <a href="${b.link}" target="_blank">View Badge ‚Üí</a>
      </div>
    `;
  });

  resDiv.innerHTML = html;
}
</script>

</body>
</html>
